I"¦7<ul id="markdown-toc">
  <li><a href="#æ¨¡å—æ¨¡å¼--modulet-pattern" id="markdown-toc-æ¨¡å—æ¨¡å¼--modulet-pattern">æ¨¡å—æ¨¡å¼ â€“ Modulet Pattern</a></li>
  <li><a href="#æ„é€ å‡½æ•°çš„ç§æœ‰æˆå‘˜" id="markdown-toc-æ„é€ å‡½æ•°çš„ç§æœ‰æˆå‘˜">æ„é€ å‡½æ•°çš„ç§æœ‰æˆå‘˜</a></li>
  <li><a href="#mixins--æ··å…¥" id="markdown-toc-mixins--æ··å…¥">Mixins â€“ æ··å…¥</a></li>
</ul>

<p><code class="highlighter-rouge">JavaScript</code>çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯å…¬æœ‰çš„ï¼Œæ²¡æœ‰æ˜¾å¼çš„æ–¹æ³•å¯ä»¥æŒ‡å®šæŸä¸ªå±æ€§ä¸èƒ½è¢«å¤–ç•ŒæŸä¸ªå¯¹è±¡è®¿é—®ã€‚é€šå¸¸çš„æ–¹æ³•æ˜¯é€šè¿‡<em>å‘½åè§„åˆ™</em>ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ä¸å¸Œæœ›å…¬æœ‰çš„å±æ€§åå‰åŠ ä¸Šä¸‹åˆ’çº¿(<code class="highlighter-rouge">_</code>)ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰äº›å…¶ä»–çš„æ–¹æ³•ã€‚</p>

<!-- more -->

<h2 id="æ¨¡å—æ¨¡å¼--modulet-pattern">æ¨¡å—æ¨¡å¼ â€“ Modulet Pattern</h2>

<p>æ¨¡å—æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡åˆ›å»ºæ¨¡å¼ï¼Œè¢«è®¾è®¡ç”¨æ¥åˆ›å»ºä¸€ä¸ªæ‹¥æœ‰ç§æœ‰æ•°æ®çš„å•ä¸€å¯¹è±¡(The <em>module pattern</em> is an object-creation pattern designed to create singleton objects with private data)ã€‚</p>

<p>åŸºæœ¬çš„æ–¹æ³•æ˜¯ä½¿ç”¨<code class="highlighter-rouge">IIFE</code>(immediately invoked function expression)æ¥è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚<code class="highlighter-rouge">IIFE</code>æ˜¯ä¸€ä¸ªä¸€ç»å®šä¹‰å°±ç«‹å³è°ƒç”¨å¹¶è¿è¡Œçš„å‡½æ•°è¡¨è¾¾å¼ã€‚å®ƒå¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„æœ¬åœ°å˜é‡ï¼Œè¿™äº›Local variableåœ¨å‡½æ•°å¤–å¹¶ä¸å¯è§ã€‚å› ä¸ºè¿”å›çš„å¯¹è±¡è¢«å®šä¹‰åœ¨å‡½æ•°å†…éƒ¨ï¼Œå¯¹è±¡çš„æ–¹æ³•å¯ä»¥è®¿é—®è¿™äº›æ•°æ®ã€‚ä»¥è¿™ç§æ–¹å¼è®¿é—®ç§æœ‰å˜é‡çš„æ–¹æ³•ï¼Œå«<code class="highlighter-rouge">privileged method</code>ã€‚</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">yourobject</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">//private data variable</span>

    <span class="k">return</span> <span class="p">{</span>
        <span class="c1">//public methods and properties</span>
    <span class="p">};</span> <span class="c1">//æ­¤å¤„ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡</span>
<span class="p">}());</span>
</code></pre></div></div>

<p>è¯¥æ¨¡å¼åˆ›å»ºäº†ä¸€ä¸ªåŒ¿åå‡½æ•°å¹¶ç«‹å³æ‰§è¡Œï¼Œè¿™æ„å‘³ç€è¿™ä¸ªå‡½æ•°ä»…å­˜åœ¨äºè¢«è°ƒç”¨çš„ç¬é—´ï¼Œä¸€æ—¦æ‰§è¡Œåç«‹å³è¢«é”€æ¯äº†ã€‚</p>

<p>æ¨¡å—æ¨¡å¼å…è®¸ä½ ä½¿ç”¨æ™®é€šå˜é‡ä½œä¸ºéå…¬æœ‰çš„å¯¹è±¡çš„å±æ€§ï¼Œé€šè¿‡åˆ›å»º<em>é—­åŒ…</em>å‡½æ•°ä½œä¸ºå¯¹è±¡çš„æ–¹æ³•æ¥æ“ä½œå®ƒä»¬ã€‚<strong>é—­åŒ…å‡½æ•°å°±æ˜¯ä¸€ä¸ªå¯ä»¥è®¿é—®å¤–éƒ¨ä½œç”¨åŸŸæ•°æ®çš„å‡½æ•°</strong>ã€‚åœ¨æ¨¡å—æ¨¡å¼ä¸­ï¼Œå˜é‡å®šä¹‰åœ¨<code class="highlighter-rouge">IIFE</code>ä¸­ï¼Œè€Œè®¿é—®å˜é‡çš„å‡½æ•°ä¹Ÿå®šä¹‰åœ¨<code class="highlighter-rouge">IIFE</code>ä¸­ã€‚</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Nicholas</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">getAge</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="k">return</span> <span class="nx">age</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="na">growOlder</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="nx">age</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}());</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>   <span class="c1">//"Nicholas"</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">getAge</span><span class="p">());</span>   <span class="c1">//25</span>

<span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>   <span class="c1">//å¤–éƒ¨æ— æ³•è®¿é—®</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">getAge</span><span class="p">());</span>   <span class="sr">/2</span><span class="err">5
</span></code></pre></div></div>

<blockquote>
  <p>å˜é‡<code class="highlighter-rouge">age</code>å°±æ˜¯<code class="highlighter-rouge">person</code>å¯¹è±¡çš„ä¸€ä¸ªç§æœ‰å±æ€§ï¼Œå®ƒæ— æ³•è¢«å¤–ç•Œç›´æ¥è®¿é—®ï¼Œä½†å¯ä»¥é€šè¿‡å¯¹è±¡çš„æ–¹æ³•æ¥æ“ä½œã€‚è¯¥å¯¹è±¡ä¸Šæœ‰ä¸¤ä¸ªç‰¹æƒæ–¹æ³•ï¼š<code class="highlighter-rouge">getAge()</code>å’Œ<code class="highlighter-rouge">growOlder()</code>ã€‚å®ƒä»¬æ˜¯å¯ä»¥ç›´æ¥è®¿é—®<code class="highlighter-rouge">age</code>çš„ï¼Œå› ä¸ºéƒ½å®šä¹‰åœ¨åŒä¸€ä¸ª<code class="highlighter-rouge">IIFE</code>ä¸­ã€‚</p>
</blockquote>

<p>è¿˜æœ‰ä¸€ç§<em>æš´éœ²å¼å†™æ³•</em>ï¼š</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">getAge</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">age</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">growOlder</span><span class="p">(){</span>
        <span class="nx">age</span><span class="o">++</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Nicholas</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">getAge</span><span class="p">:</span> <span class="nx">getAge</span><span class="p">,</span>
        <span class="na">growOlder</span><span class="p">:</span> <span class="nx">growOlder</span>
    <span class="p">};</span>
<span class="p">}());</span>
</code></pre></div></div>

<blockquote>
  <p>è¿™ä¸ªä¾‹å­ä¸å‰ä¾‹æ˜¯ä¸€æ ·çš„ã€‚</p>
</blockquote>

<hr />

<h2 id="æ„é€ å‡½æ•°çš„ç§æœ‰æˆå‘˜">æ„é€ å‡½æ•°çš„ç§æœ‰æˆå‘˜</h2>

<p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æè¿‡å¯¹è±¡å­—é¢å€¼çš„æ–¹å¼æ„å»ºäº†ä¸€ä¸ªå…·æœ‰ç§æœ‰å˜é‡çš„å¯¹è±¡ã€‚ä½†å¦‚æœæ˜¯æ„é€ å‡½æ•°å‘¢ï¼Œæˆ‘ä»¬æŒ‡å¯¼ï¼Œæ„é€ å‡½æ•°ä¹Ÿæ˜¯å‡½æ•°ï¼Œå‡½æ•°å†…å®šä¹‰çš„å˜é‡ä¸èƒ½è¢«å¤–éƒ¨è®¿é—®ã€‚</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">Person</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
    <span class="c1">//define a variable only accessible inside of the Person constructor</span>

    <span class="kd">var</span> <span class="nx">age</span>  <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">name</span>  <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">getAge</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">age</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">growOlder</span> <span class="o">=</span>  <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">age</span><span class="o">++</span><span class="p">;</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">person</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">"</span><span class="s2">Nicholas</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">person1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">"</span><span class="s2">Greg</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>   <span class="c1">//"Nicholas"</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">getAge</span><span class="p">());</span>   <span class="c1">//25</span>

<span class="nx">person</span><span class="p">.</span><span class="nx">age</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>   <span class="c1">//å¤–éƒ¨æ— æ³•è®¿é—®</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">getAge</span><span class="p">());</span>   <span class="c1">//25</span>

<span class="nx">person</span><span class="p">.</span><span class="nx">growOlder</span><span class="p">();</span>
<span class="nx">cosole</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person</span><span class="p">.</span><span class="nx">getAge</span><span class="p">());</span>    <span class="c1">//26</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person1</span><span class="p">.</span><span class="nx">getAge</span><span class="p">());</span>  <span class="c1">//25</span>
</code></pre></div></div>

<blockquote>
  <p>æ­£å¦‚æˆ‘ä»¬åœ¨<code class="highlighter-rouge">å†è°ˆåŸå‹ä¸ç»§æ‰¿</code>æ—¶è¯´çš„ï¼Œå°†æ–¹æ³•æ”¾åœ¨å®ä¾‹ä¸Šä¸å¦‚æ”¾åœ¨åŸå‹ä¸Šæœ‰æ•ˆã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³è¦ç§æœ‰çš„å®ä¾‹åŒ–çš„æ•°æ®ï¼Œè¿™æ˜¯å”¯ä¸€çš„æ–¹æ³•ã€‚</p>
</blockquote>

<p>ä½†æ˜¯ï¼Œå¦‚æœéœ€è¦æ‰€æœ‰å®ä¾‹éƒ½å¯å…±äº«ç§æœ‰æ•°æ®ï¼Œå°±å¥½åƒå®ƒè¢«å®šä¹‰åœ¨åŸå‹é‡Œé‚£æ ·ï¼Œä½ å¯ä»¥ç»“åˆä¸¤è€…ï¼š</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">Person</span> <span class="o">=</span> <span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
    <span class="c1">//everyone shares the same age</span>
    <span class="kd">var</span> <span class="nx">age</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">InnerPerson</span><span class="p">(</span><span class="nx">name</span><span class="p">){</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">InnerPerson</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">getAge</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="k">return</span> <span class="nx">age</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">InnerPerson</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">growOlder</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
        <span class="nx">age</span><span class="o">++</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">InnerPerson</span><span class="p">;</span>
<span class="p">}());</span>

<span class="kd">var</span> <span class="nx">person1</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">"</span><span class="s2">Nicholas</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">person2</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Person</span><span class="p">(</span><span class="dl">"</span><span class="s2">Greg</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">person1</span><span class="p">.</span><span class="nx">growOlder</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person1</span><span class="p">.</span><span class="nx">getAge</span><span class="p">());</span>  <span class="c1">//26</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">person2</span><span class="p">.</span><span class="nx">getAge</span><span class="p">());</span>  <span class="c1">//26</span>
</code></pre></div></div>

<p>æœ€ç»ˆï¼Œæ‰€æœ‰å®ä¾‹å¾—ä»¥å…±äº«<code class="highlighter-rouge">age</code>å˜é‡ã€‚</p>

<h2 id="mixins--æ··å…¥">Mixins â€“ æ··å…¥</h2>

<p>æ··å…¥æ—¶ä¸€ç§ç»™å¯¹è±¡æ·»åŠ åŠŸèƒ½ï¼ŒåŒæ—¶é¿å…ç»§æ‰¿çš„å¼ºæœ‰åŠ›çš„æ–¹å¼ã€‚æ··å…¥å°†ä¸€ä¸ªå±æ€§ä»ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åˆ°å¦ä¸€ä¸ªï¼Œä»è€Œä½¿å¾—æ¥æ”¶è€…åœ¨ä¸éœ€è¦ç»§æ‰¿çš„æƒ…å†µä¸‹å°±èƒ½è·å¾—å…¶åŠŸèƒ½ã€‚</p>
:ET