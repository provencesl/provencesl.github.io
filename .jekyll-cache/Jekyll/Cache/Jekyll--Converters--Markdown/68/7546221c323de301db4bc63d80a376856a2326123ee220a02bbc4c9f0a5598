I"õ=<ul id="markdown-toc">
  <li><a href="#å¼•å…¥css" id="markdown-toc-å¼•å…¥css">å¼•å…¥CSS</a></li>
  <li><a href="#extracttextwebpackpluginæ’ä»¶" id="markdown-toc-extracttextwebpackpluginæ’ä»¶">ExtractTextWebpackPluginæ’ä»¶</a></li>
</ul>

<p>å…¶ä»–é“¾æ¥ï¼š</p>

<ul>
  <li><a href="/2017/05/17/First-meet-Webpack">Webpackç¬¬ä¸€è¯¾ â€“ åˆè¯†Webpack</a></li>
  <li><a href="/2017/05/18/Webpack-second">Webpackç¬¬äºŒè¯¾ â€“ HTMLã€æ’ä»¶å’Œwebpack-dev-serverç¯‡</a></li>
</ul>

<p>ä»£ç <code class="highlighter-rouge">Github</code>åœ°å€ï¼š</p>

<ul>
  <li><a href="https://github.com/maoxiaoke/You-know-what-is-webpack">https://github.com/maoxiaoke/You-know-what-is-webpack</a></li>
</ul>

<p>å½“ç„¶äº†ï¼Œ<code class="highlighter-rouge">webpack</code>ä¹Ÿå¯ä»¥å¯¹<code class="highlighter-rouge">CSS</code>æ–‡ä»¶è¿›è¡Œæ‰“åŒ…ï¼Œå°†å…¶ä½œä¸ºæ¨¡å—å¼•å…¥åˆ°<code class="highlighter-rouge">JavaScript</code>ä»£ç ä¸­ï¼Œç„¶ååˆ©ç”¨<code class="highlighter-rouge">Loader</code>è¾“å‡ºã€‚æœ¬ç¯‡æ–‡ç« ä¸»è¦é’ˆå¯¹çš„å°±æ˜¯å¯¹<code class="highlighter-rouge">CSS</code>çš„æ“ä½œã€‚</p>

<!-- more -->

<h2 id="å¼•å…¥css">å¼•å…¥CSS</h2>

<p>æˆ‘ä»¬è¿˜æ˜¯åˆ©ç”¨ç¬¬äºŒè¯¾çš„ä¾‹å­ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸æ‰“ç®—ç”¨<code class="highlighter-rouge">HtmlWebpackPlugin</code>æ’ä»¶ã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code class="highlighter-rouge">index.html</code>æ–‡ä»¶ï¼Œæ”¾åœ¨<code class="highlighter-rouge">dist</code>æ–‡ä»¶å¤¹ä¸­(å› ä¸ºæˆ‘ä»¬å°†å®ƒä½œä¸º<code class="highlighter-rouge">build</code>çš„ç»“æœæ–‡ä»¶å¤¹)ã€‚</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!--index.html--&gt;</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;title&gt;</span>Webpack template demo<span class="nt">&lt;/title&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
      <span class="nt">&lt;div&gt;</span>
          <span class="nt">&lt;p&gt;</span>I am Webpack.<span class="nt">&lt;/p&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"bundle.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>åœ¨<code class="highlighter-rouge">app</code>æ–‡ä»¶å¤¹ä¸­ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code class="highlighter-rouge">css</code>æ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾æ ·å¼æ–‡ä»¶<code class="highlighter-rouge">style.css</code>ã€‚</p>

<div class="language-css highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">/*style.css*/</span>
<span class="nt">body</span> <span class="p">{</span>
    <span class="nl">background-color</span><span class="p">:</span> <span class="no">red</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>æˆ‘ä»¬å°†èƒŒæ™¯å®šä¹‰ä¸ºçº¢è‰²ã€‚æ¥ç€ï¼Œæˆ‘ä»¬è¦åœ¨<code class="highlighter-rouge">index.js</code>å…¥å£æ–‡ä»¶<code class="highlighter-rouge">import</code><code class="highlighter-rouge">css</code>æ–‡ä»¶ã€‚</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//index.js</span>
<span class="k">import</span> <span class="dl">'</span><span class="s1">./css/style.css</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">function</span> <span class="nx">component</span> <span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">element</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="dl">'</span><span class="s1">div</span><span class="dl">'</span><span class="p">);</span>
  <span class="nx">element</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">Hello Worldï¼</span><span class="dl">"</span><span class="p">;</span>

  <span class="k">return</span> <span class="nx">element</span><span class="p">;</span>
<span class="p">}</span>
<span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">component</span><span class="p">());</span>
</code></pre></div></div>

<p>åˆ°æ­¤ï¼Œæˆ‘ä»¬çš„åŸºç¡€æ–‡ä»¶å·²ç»å®‰æ’å¥½äº†ã€‚è¦ä½¿å¾—<code class="highlighter-rouge">webpack</code>èƒ½<em>è¯†åˆ«</em><code class="highlighter-rouge">css</code>æ–‡ä»¶ã€‚æˆ‘ä»¬éœ€è¦<code class="highlighter-rouge">Loader</code>ï¼Œåˆ†åˆ«æ˜¯<code class="highlighter-rouge">css-loader</code>å’Œ<code class="highlighter-rouge">style-loader</code>ã€‚<code class="highlighter-rouge">css-loader</code>ç”¨æ¥è¿”å›æœ‰<code class="highlighter-rouge">@import</code>å’Œ<code class="highlighter-rouge">url()</code>çš„<code class="highlighter-rouge">css</code>æ–‡ä»¶ï¼Œ<code class="highlighter-rouge">style.css</code>ç”¨æ¥å°†<code class="highlighter-rouge">css</code>æ–‡ä»¶æ’å…¥é¡µé¢ã€‚</p>

<blockquote>
  <p>æœ‰å…³<code class="highlighter-rouge">css-loader</code>å’Œ<code class="highlighter-rouge">style-loader</code>çš„æ›´å¤šè®¨è®ºï¼Œå¯å‚è€ƒ<code class="highlighter-rouge">stackoverflow</code>çš„é—®é¢˜ï¼š<a href="http://stackoverflow.com/questions/34039826/webpack-style-loader-vs-css-loader">http://stackoverflow.com/questions/34039826/webpack-style-loader-vs-css-loader</a></p>
</blockquote>

<p>æˆ‘ä»¬è¿™æ ·æ¥å®‰è£…<code class="highlighter-rouge">Loader</code>ä¾èµ–ã€‚</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> <span class="nt">--save-dev</span> css-loader style-loader
</code></pre></div></div>

<p>åœ¨<code class="highlighter-rouge">webpack.config.js</code>ä¸­é…ç½®å¦‚ä¸‹</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//webpack.config.js</span>
<span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">entry</span><span class="p">:</span> <span class="dl">'</span><span class="s1">./app/index.js</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">filename</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bundle.js</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">path</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">dist</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">},</span>

  <span class="c1">//style-loader å’Œ css-loader</span>
  <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">rules</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">css$/</span><span class="p">,</span>
            <span class="na">use</span><span class="p">:</span> <span class="p">[</span> <span class="dl">'</span><span class="s1">style-loader</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">css-loader</span><span class="dl">'</span> <span class="p">]</span>
        <span class="p">}]</span>
    <span class="p">},</span>
  <span class="na">devServer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">contentBase</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dist</span><span class="dl">"</span><span class="p">),</span>
    <span class="na">inline</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">test</code>æŒ‡çš„æ˜¯ç»™å‡ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œæ‰¾åˆ°ä»¥<code class="highlighter-rouge">.css</code>ä¸ºåç¼€çš„æ ·å¼æ–‡ä»¶ã€‚<code class="highlighter-rouge">use</code>ä¸­å®šä¹‰äº†<code class="highlighter-rouge">style-loader</code>å’Œ<code class="highlighter-rouge">css-loader</code>ï¼Œä½¿ç”¨æ–¹å¼æ˜¯<strong>ä»å³å¾€å·¦</strong>ï¼Œæ‰€ä»¥<code class="highlighter-rouge">style-loader</code>åœ¨å‰ï¼Œ<code class="highlighter-rouge">css-loader</code>åœ¨åã€‚</p>

<p>æˆ‘ä»¬å¼€å¯äº†<code class="highlighter-rouge">WDS</code>(Webpack Dev Server)ï¼Œå¹¶é…ç½®<code class="highlighter-rouge">contentBase</code>å‚æ•°ï¼Œå°†æœåŠ¡å™¨å®šå‘äº<code class="highlighter-rouge">dist</code>æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œ<code class="highlighter-rouge">WDS</code>ä¼šæœåŠ¡äºæ ¹ç›®å½•ã€‚<code class="highlighter-rouge">inline</code>å‚æ•°åœ¨<code class="highlighter-rouge">dev-server</code>çš„ä¸¤ç§æ¨¡å¼é—´åˆ‡æ¢ï¼Œ<code class="highlighter-rouge">true</code>å°±æ˜¯<code class="highlighter-rouge">inline</code>æ¨¡å¼ï¼Œä¿®æ”¹æ–‡ä»¶å°±ä¼šé‡è½½æµè§ˆå™¨çª—å£ï¼›<code class="highlighter-rouge">false</code>ä»£è¡¨<code class="highlighter-rouge">iframe</code>æ¨¡å¼ï¼›é»˜è®¤ä¸º<code class="highlighter-rouge">inline</code>æ¨¡å¼ã€‚</p>

<p>è®©æˆ‘ä»¬å¼€å¯æœåŠ¡å™¨</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm run build <span class="o">&amp;&amp;</span> npm run start
</code></pre></div></div>

<p>è¿™æ—¶ï¼Œåœ¨<code class="highlighter-rouge">8080</code>ç«¯å£ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†æ–‡å­—ä¸‹é¢çš„çº¢è‰²èƒŒæ™¯ã€‚</p>

<blockquote>
  <p>æ›´å¤šæœ‰å…³<code class="highlighter-rouge">css-loader</code>è®¾ç½®çš„é—®é¢˜ï¼Œè¯·å‚è€ƒ<a href="https://doc.webpack-china.org/loaders/css-loader/">https://doc.webpack-china.org/loaders/css-loader/</a>ï¼Œå°¤å…¶æ˜¯æœ‰å…³<code class="highlighter-rouge">css</code>ä½œç”¨åŸŸå’Œ<code class="highlighter-rouge">css module</code>çš„å†…å®¹ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼Œ<code class="highlighter-rouge">CSS</code>å°†æ‰€æœ‰çš„ç±»åæš´éœ²åˆ°å…¨å±€çš„é€‰æ‹©å™¨ä½œç”¨åŸŸä¸­ã€‚<code class="highlighter-rouge">css module</code>å°±æ˜¯å¯ç”¨å±€éƒ¨ä½œç”¨åŸŸ<code class="highlighter-rouge">CSS</code>ã€‚</p>
</blockquote>

<hr />

<h2 id="extracttextwebpackpluginæ’ä»¶">ExtractTextWebpackPluginæ’ä»¶</h2>

<p>ä¸Šé¢çš„åšæ³•æœ‰ä¸€ä¸ªæ€§èƒ½ä¸Šçš„é—®é¢˜ï¼Œå°±æ˜¯æ— æ³•ä½¿ç”¨æµè§ˆå™¨å»å¼‚æ­¥å¹¶å¹¶è¡Œåœ°åŠ è½½<code class="highlighter-rouge">CSS</code>ã€‚åè€Œï¼Œä½ çš„æ–‡ä»¶éœ€è¦ç­‰å¾…æ•´ä¸ª<code class="highlighter-rouge">JavaScript</code>æ–‡ä»¶åŠ è½½å®Œï¼Œæ‰èƒ½è¿›è¡Œæ¸²æŸ“ã€‚ä½†æ˜¯åœ¨æˆ‘ä»¬çš„ç½‘é¡µè®¾è®¡ä¸­ï¼Œæœ‰ä¸€ç§<strong>å¹³ç¨³é€€åŒ–</strong>çš„æ¦‚å¿µã€‚å°±æ˜¯è¯´ï¼Œ<code class="highlighter-rouge">HTML</code>æ˜¯æœ€é‡è¦çš„ï¼Œå…¶æ¬¡æ˜¯<code class="highlighter-rouge">CSS</code>ï¼Œæœ€åæ˜¯<code class="highlighter-rouge">JavaScript</code>ã€‚</p>

<p>æ‰€ä»¥å‘¢ï¼Œè¿™ä¸ªæ’ä»¶çš„ä½œç”¨å°±æ˜¯å°†<code class="highlighter-rouge">CSS</code>å•ç‹¬æ‰“åŒ…ï¼Œç„¶åäº¤ç»™æµè§ˆå™¨ç‡å…ˆåŠ è½½ã€‚</p>

<p>é¦–å…ˆï¼Œæˆ‘ä»¬å¯¹æ’ä»¶è¿›è¡Œå¼€å‘ä¾èµ–å®‰è£…</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">--save-dev</span> extract-text-webpack-plugin
</code></pre></div></div>

<p>ç„¶åï¼Œæˆ‘ä»¬éœ€è¦ä¿®æ”¹æˆ‘ä»¬çš„<code class="highlighter-rouge">webpack.config.js</code>é…ç½®æ–‡ä»¶ï¼š</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//webpack.config.js</span>
<span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">path</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">ExtractTextPlugin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">extract-text-webpack-plugin</span><span class="dl">'</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">entry</span><span class="p">:</span> <span class="dl">'</span><span class="s1">./app/index.js</span><span class="dl">'</span><span class="p">,</span>
  <span class="na">output</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">filename</span><span class="p">:</span> <span class="dl">'</span><span class="s1">bundle.js</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">path</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">'</span><span class="s1">dist</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">rules</span><span class="p">:</span> <span class="p">[{</span>
            <span class="na">test</span><span class="p">:</span> <span class="sr">/</span><span class="se">\.</span><span class="sr">css$/</span><span class="p">,</span>
            <span class="c1">//use: [ 'style-loader', 'css-loader' ]</span>
            <span class="na">use</span><span class="p">:</span> <span class="nx">ExtractTextPlugin</span><span class="p">.</span><span class="nx">extract</span><span class="p">({</span>
              <span class="na">use</span><span class="p">:</span> <span class="dl">'</span><span class="s1">css-loader</span><span class="dl">'</span>
            <span class="p">})</span>
        <span class="p">}]</span>
    <span class="p">},</span>
    <span class="c1">//ExtractTextPlugin</span>
    <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
      <span class="k">new</span> <span class="nx">ExtractTextPlugin</span><span class="p">(</span><span class="dl">'</span><span class="s1">styles.css</span><span class="dl">'</span><span class="p">),</span>
    <span class="p">],</span>
  <span class="na">devServer</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">contentBase</span><span class="p">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="dl">"</span><span class="s2">dist</span><span class="dl">"</span><span class="p">),</span>
    <span class="na">inline</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">};</span>
</code></pre></div></div>

<p>è¿™æ ·çš„è®¾ç½®ä¸‹ï¼Œ<code class="highlighter-rouge">webpack</code>ä¼šåœ¨<code class="highlighter-rouge">dist</code>æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆä¸€ä¸ªæ±‡æ€»çš„<code class="highlighter-rouge">styles.css</code>æ–‡ä»¶ã€‚ä½ éœ€è¦å°†å®ƒä½œä¸ºä¸€ä¸ªå•ç‹¬çš„æ ·å¼åŠ å…¥åˆ°<code class="highlighter-rouge">index.html</code>ä¸­ã€‚</p>
:ET